stella@stella-XPS-13-9380:~$ cd Documents/sources/
stella@stella-XPS-13-9380:~/Documents/sources$ git clone https://github.com/project-dune/dune.git
Clonage dans 'dune'...
remote: Enumerating objects: 1474, done.
remote: Counting objects: 100% (150/150), done.
remote: Compressing objects: 100% (84/84), done.
remote: Total 1474 (delta 71), reused 104 (delta 66), pack-reused 1324
Réception d'objets: 100% (1474/1474), 397.99 KiB | 6.22 MiB/s, fait.
Résolution des deltas: 100% (960/960), fait.
stella@stella-XPS-13-9380:~/Documents/sources$ ll
total 100
drwxrwxr-x 21 stella stella 4096 Mar  4 19:52  ./
drwxr-xr-x 12 stella stella 4096 Mar  1 12:28  ../
drwxrwxrwx 12 stella stella 4096 Sep 30 23:58  benchs-zips/
drwxrwxrwx 19 stella stella 4096 Oct  1 13:00  Bochs-svn/
drwxrwxrwx 12 stella stella 4096 Sep 30 23:57  bohem_gc/
drwxrwxrwx  3 stella stella 4096 Oct  1 13:00  Compa22-workshop/
-rwxrwxrwx  1 stella stella  134 Oct  1 12:36 'compte_rendu reunion semaine 30.01'*
drwxrwxrwx 22 stella stella 4096 Sep 30 23:56  criu-PML/
drwxrwxrwx  2 stella stella 4096 Oct  1 13:00  disk_src/
drwxrwxrwx  2 stella stella 4096 Oct  1 13:00  disk_vm/
drwxrwxr-x  8 stella stella 4096 Mar  4 19:52  dune/
drwxrwxrwx  3 stella stella 4096 Oct  1 13:00  gcbench/
drwxrwxrwx  2 stella stella 4096 Oct  1 13:00 'graphs scripts python'/
drwxrwxr-x  4 stella stella 4096 Oct 28 16:47  legoos-Brice/
drwxrwxrwx 30 stella stella 4096 Jan 12 21:50  Linux_VTF_4.15/
drwxrwxrwx  3 stella stella 4096 Oct  1 13:00  MarkUs-sp2020-master/
-rwxrwxrwx  1 stella stella  276 Oct  1 13:00  myconfigure.sh*
drwxrwxrwx  7 stella stella 4096 Jan 23 00:26  out-of-hypervisor-papers/
drwxrwxrwx  7 stella stella 4096 Sep 30 23:56  phoenix/
drwxrwxrwx  4 stella stella 4096 Feb 26 20:12  program_tests/
-rwxrwxrwx  1 stella stella  368 Oct  1 12:33  rdpmc.h*
drwxrwxrwx 11 stella stella 4096 Oct  5 16:02  spp/
drwxrwxrwx  7 stella stella 4096 Oct  1 13:00  sqemu/
drwxr-xr-x 18 stella root   4096 Oct  3 14:33  These_Xen10_VTF/
-rwxrwxrwx  1 stella stella  555 Oct  5 13:42  var*
stella@stella-XPS-13-9380:~/Documents/sources$ cd dune/
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ll
total 72
drwxrwxr-x  8 stella stella 4096 Mar  4 19:52 ./
drwxrwxr-x 21 stella stella 4096 Mar  4 19:52 ../
drwxrwxr-x  5 stella stella 4096 Mar  4 19:52 apps/
drwxrwxr-x  2 stella stella 4096 Mar  4 19:52 bench/
-rwxrwxr-x  1 stella stella  295 Mar  4 19:52 build-eglibc.sh*
-rwxrwxr-x  1 stella stella  194 Mar  4 19:52 dune_env.sh*
-rwxrwxr-x  1 stella stella  699 Mar  4 19:52 dune_req.sh*
-rw-rw-r--  1 stella stella 6253 Mar  4 19:52 eglibc-2.14.diff
drwxrwxr-x  8 stella stella 4096 Mar  4 19:52 .git/
-rw-rw-r--  1 stella stella  371 Mar  4 19:52 .gitignore
drwxrwxr-x  2 stella stella 4096 Mar  4 19:52 kern/
drwxrwxr-x  2 stella stella 4096 Mar  4 19:52 libdune/
-rw-rw-r--  1 stella stella 1102 Mar  4 19:52 LICENSE
-rw-rw-r--  1 stella stella  298 Mar  4 19:52 Makefile
-rw-rw-r--  1 stella stella 4452 Mar  4 19:52 README.md
drwxrwxr-x  2 stella stella 4096 Mar  4 19:52 test/
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ l
apps/  bench/  build-eglibc.sh*  dune_env.sh*  dune_req.sh*  eglibc-2.14.diff  kern/  libdune/  LICENSE  Makefile  README.md  test/
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
/home/stella/Documents/sources/dune/kern/apic.c:5:10: fatal error: asm/ipi.h: Aucun fichier ou dossier de ce type
 #include <asm/ipi.h>
          ^~~~~~~~~~~
compilation terminated.
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/apic.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/apic.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ll /usr/include/
Display all 235 possibilities? (y or n)
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ll /usr/include/as
asm/         asm-generic/ assert.h     
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ll /usr/include/as
asm/         asm-generic/ assert.h     
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ll /usr/include/asm
asm/         asm-generic/ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ll /usr/include/asm
asm/         asm-generic/ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ll /usr/include/asm/
a.out.h            debugreg.h         ioctl.h            ldt.h              perf_regs.h        processor-flags.h  sigcontext32.h     stat.h             unistd_32.h        
auxvec.h           e820.h             ioctls.h           mce.h              poll.h             ptrace-abi.h       sigcontext.h       svm.h              unistd_64.h        
bitsperlong.h      errno.h            ipcbuf.h           mman.h             posix_types_32.h   ptrace.h           siginfo.h          swab.h             unistd.h           
boot.h             fcntl.h            ist.h              msgbuf.h           posix_types_64.h   resource.h         signal.h           termbits.h         unistd_x32.h       
bootparam.h        hw_breakpoint.h    kvm.h              msr.h              posix_types.h      sembuf.h           socket.h           termios.h          vm86.h             
bpf_perf_event.h   hwcap2.h           kvm_para.h         mtrr.h             posix_types_x32.h  setup.h            sockios.h          types.h            vmx.h              
byteorder.h        hyperv.h           kvm_perf.h         param.h            prctl.h            shmbuf.h           statfs.h           ucontext.h         vsyscall.h         
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ll /usr/include/asm-generic/
auxvec.h          errno.h           int-ll64.h        kvm_para.h        param.h           sembuf.h          siginfo.h         sockios.h         termbits.h        unistd.h          
bitsperlong.h     fcntl.h           ioctl.h           mman-common.h     poll.h            setup.h           signal-defs.h     statfs.h          termios.h         
bpf_perf_event.h  hugetlb_encode.h  ioctls.h          mman.h            posix_types.h     shmbuf.h          signal.h          stat.h            types.h           
errno-base.h      int-l64.h         ipcbuf.h          msgbuf.h          resource.h        shmparam.h        socket.h          swab.h            ucontext.h        
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ll /usr/include/asm-generic/sudo ^C
stella@stella-XPS-13-9380:~/Documents/sources/dune$ vim kern/apic.c
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
/home/stella/Documents/sources/dune/kern/apic.c: In function ‘dune_apic_send_ipi_x2’:
/home/stella/Documents/sources/dune/kern/apic.c:103:8: error: implicit declaration of function ‘__prepare_ICR’; did you mean ‘smp_prepare_cpus’? [-Werror=implicit-function-declaration]
  low = __prepare_ICR(0, vector, APIC_DEST_PHYSICAL);
        ^~~~~~~~~~~~~
        smp_prepare_cpus
/home/stella/Documents/sources/dune/kern/apic.c:104:2: error: implicit declaration of function ‘x2apic_wrmsr_fence’; did you mean ‘weak_wrmsr_fence’? [-Werror=implicit-function-declaration]
  x2apic_wrmsr_fence();
  ^~~~~~~~~~~~~~~~~~
  weak_wrmsr_fence
/home/stella/Documents/sources/dune/kern/apic.c: In function ‘dune_apic_send_ipi_x’:
/home/stella/Documents/sources/dune/kern/apic.c:116:2: error: implicit declaration of function ‘__default_send_IPI_dest_field’ [-Werror=implicit-function-declaration]
  __default_send_IPI_dest_field(destination_apic_id, vector, APIC_DEST_PHYSICAL);
  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/apic.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/apic.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make clean
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
stella@stella-XPS-13-9380:~/Documents/sources/dune$ vim kern/apic.c
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
/home/stella/Documents/sources/dune/kern/apic.c:5:10: fatal error: asm/ipi.h: Aucun fichier ou dossier de ce type
 #include <asm/ipi.h>
          ^~~~~~~~~~~
compilation terminated.
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/apic.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/apic.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
/home/stella/Documents/sources/dune/kern/apic.c: In function ‘dune_apic_send_ipi_x2’:
/home/stella/Documents/sources/dune/kern/apic.c:103:2: error: implicit declaration of function ‘x2apic_wrmsr_fence’; did you mean ‘weak_wrmsr_fence’? [-Werror=implicit-function-declaration]
  x2apic_wrmsr_fence();
  ^~~~~~~~~~~~~~~~~~
  weak_wrmsr_fence
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/apic.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/apic.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ vim kern/apic.c
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make clean
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
/home/stella/Documents/sources/dune/kern/apic.c: In function ‘dune_apic_send_ipi_x2’:
/home/stella/Documents/sources/dune/kern/apic.c:103:2: error: implicit declaration of function ‘x2apic_wrmsr_fence’; did you mean ‘weak_wrmsr_fence’? [-Werror=implicit-function-declaration]
  x2apic_wrmsr_fence();
  ^~~~~~~~~~~~~~~~~~
  weak_wrmsr_fence
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/apic.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/apic.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ vim kern/apic.c
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make clean && make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
/home/stella/Documents/sources/dune/kern/apic.c: In function ‘dune_apic_send_ipi_x2’:
/home/stella/Documents/sources/dune/kern/apic.c:104:2: error: implicit declaration of function ‘x2apic_wrmsr_fence’; did you mean ‘weak_wrmsr_fence’? [-Werror=implicit-function-declaration]
  x2apic_wrmsr_fence();
  ^~~~~~~~~~~~~~~~~~
  weak_wrmsr_fence
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/apic.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/apic.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ vim kern/apic.c
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make clean && make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
/home/stella/Documents/sources/dune/kern/apic.c: In function ‘dune_apic_send_ipi_x2’:
/home/stella/Documents/sources/dune/kern/apic.c:104:2: error: implicit declaration of function ‘x2apic_wrmsr_fence’; did you mean ‘weak_wrmsr_fence’? [-Werror=implicit-function-declaration]
  x2apic_wrmsr_fence();
  ^~~~~~~~~~~~~~~~~~
  weak_wrmsr_fence
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/apic.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/apic.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ vim kern/apic.c
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make clean && make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
In file included from /home/stella/Documents/sources/dune/kern/core.c:28:0:
/home/stella/Documents/sources/dune/kern/vmx.h: In function ‘vmcs_readl’:
/home/stella/Documents/sources/dune/kern/vmx.h:108:23: error: expected string literal before ‘ASM_VMX_VMREAD_RDX_RAX’
         asm volatile (ASM_VMX_VMREAD_RDX_RAX
                       ^~~~~~~~~~~~~~~~~~~~~~
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/core.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/core.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ vim kern/vmx.h
stella@stella-XPS-13-9380:~/Documents/sources/dune$ make clean && make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
<command-line>:0:10: error: invalid suffix "x" on integer constant
/home/stella/Documents/sources/dune/kern/compat.h:59:53: note: in expansion of macro ‘_DO_FORK’
 static do_fork_hack __dune_do_fork = (do_fork_hack) _DO_FORK;
                                                     ^~~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:131:26: error: ‘struct fpu’ has no member named ‘fpregs_active’
  if (!current->thread.fpu.fpregs_active)
                          ^
/home/stella/Documents/sources/dune/kern/compat.h:132:3: error: implicit declaration of function ‘fpu__restore’; did you mean ‘fpu__restore_sig’? [-Werror=implicit-function-declaration]
   fpu__restore(&current->thread.fpu);
   ^~~~~~~~~~~~
   fpu__restore_sig
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘__invept’:
/home/stella/Documents/sources/dune/kern/vmx.c:181:16: error: expected string literal before ‘ASM_VMX_INVEPT’
  asm volatile (ASM_VMX_INVEPT
                ^~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c:179:4: warning: unused variable ‘operand’ [-Wunused-variable]
  } operand = {eptp, gpa};
    ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘__vmxon’:
/home/stella/Documents/sources/dune/kern/vmx.c:212:16: error: expected string literal before ‘ASM_VMX_VMXON_RAX’
  asm volatile (ASM_VMX_VMXON_RAX
                ^~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘__vmxoff’:
/home/stella/Documents/sources/dune/kern/vmx.c:219:16: error: expected string literal before ‘ASM_VMX_VMXOFF’
  asm volatile (ASM_VMX_VMXOFF : : : "cc");
                ^~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘__invvpid’:
/home/stella/Documents/sources/dune/kern/vmx.c:230:19: error: expected string literal before ‘ASM_VMX_INVVPID’
     asm volatile (ASM_VMX_INVVPID
                   ^~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c:228:7: warning: unused variable ‘operand’ [-Wunused-variable]
     } operand = { vpid, 0, gva };
       ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmcs_clear’:
/home/stella/Documents/sources/dune/kern/vmx.c:264:16: error: expected string literal before ‘ASM_VMX_VMCLEAR_RAX’
  asm volatile (ASM_VMX_VMCLEAR_RAX "; setna %0"
                ^~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmcs_load’:
/home/stella/Documents/sources/dune/kern/vmx.c:277:16: error: expected string literal before ‘ASM_VMX_VMPTRLD_RAX’
  asm volatile (ASM_VMX_VMPTRLD_RAX "; setna %0"
                ^~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmcs_writel’:
/home/stella/Documents/sources/dune/kern/vmx.c:315:16: error: expected string literal before ‘ASM_VMX_VMWRITE_RAX_RDX’
  asm volatile (ASM_VMX_VMWRITE_RAX_RDX "; setna %0"
                ^~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_setup_constant_host_state’:
/home/stella/Documents/sources/dune/kern/vmx.c:542:24: error: implicit declaration of function ‘read_cr3’; did you mean ‘read_cr2’? [-Werror=implicit-function-declaration]
  vmcs_writel(HOST_CR3, read_cr3());  /* 22.2.3 */
                        ^~~~~~~~
                        read_cr2
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘segment_base’:
/home/stella/Documents/sources/dune/kern/vmx.c:613:64: error: dereferencing pointer to incomplete type ‘struct ldttss_desc64’
                v |= ((unsigned long)((struct ldttss_desc64 *)d)->base3) << 32;
                                                                ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init_syscall’:
<command-line>:0:13: error: invalid suffix "x" on integer constant
/home/stella/Documents/sources/dune/kern/vmx.c:1449:36: note: in expansion of macro ‘SYSCALL_TBL’
  memcpy(dune_syscall_tbl, (void *) SYSCALL_TBL,
                                    ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_run_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1481:3: error: expected ‘:’ or ‘)’ before ‘ASM_VMX_VMWRITE_RSP_RDX’
   ASM_VMX_VMWRITE_RSP_RDX "\n\t"
   ^~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:131:26: error: ‘struct fpu’ has no member named ‘fpregs_active’
  if (!current->thread.fpu.fpregs_active)
                          ^
/home/stella/Documents/sources/dune/kern/compat.h:132:3: error: implicit declaration of function ‘fpu__restore’; did you mean ‘fpu__restore_sig’? [-Werror=implicit-function-declaration]
   fpu__restore(&current->thread.fpu);
   ^~~~~~~~~~~~
   fpu__restore_sig
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘__invept’:
/home/stella/Documents/sources/dune/kern/vmx.c:181:16: error: expected string literal before ‘ASM_VMX_INVEPT’
  asm volatile (ASM_VMX_INVEPT
                ^~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c:179:4: warning: unused variable ‘operand’ [-Wunused-variable]
  } operand = {eptp, gpa};
    ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘__vmxon’:
/home/stella/Documents/sources/dune/kern/vmx.c:212:16: error: expected string literal before ‘ASM_VMX_VMXON_RAX’
  asm volatile (ASM_VMX_VMXON_RAX
                ^~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘__vmxoff’:
/home/stella/Documents/sources/dune/kern/vmx.c:219:16: error: expected string literal before ‘ASM_VMX_VMXOFF’
  asm volatile (ASM_VMX_VMXOFF : : : "cc");
                ^~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘__invvpid’:
/home/stella/Documents/sources/dune/kern/vmx.c:230:19: error: expected string literal before ‘ASM_VMX_INVVPID’
     asm volatile (ASM_VMX_INVVPID
                   ^~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c:228:7: warning: unused variable ‘operand’ [-Wunused-variable]
     } operand = { vpid, 0, gva };
       ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmcs_clear’:
/home/stella/Documents/sources/dune/kern/vmx.c:264:16: error: expected string literal before ‘ASM_VMX_VMCLEAR_RAX’
  asm volatile (ASM_VMX_VMCLEAR_RAX "; setna %0"
                ^~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmcs_load’:
/home/stella/Documents/sources/dune/kern/vmx.c:277:16: error: expected string literal before ‘ASM_VMX_VMPTRLD_RAX’
  asm volatile (ASM_VMX_VMPTRLD_RAX "; setna %0"
                ^~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmcs_writel’:
/home/stella/Documents/sources/dune/kern/vmx.c:315:16: error: expected string literal before ‘ASM_VMX_VMWRITE_RAX_RDX’
  asm volatile (ASM_VMX_VMWRITE_RAX_RDX "; setna %0"
                ^~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_setup_constant_host_state’:
/home/stella/Documents/sources/dune/kern/vmx.c:542:24: error: implicit declaration of function ‘read_cr3’; did you mean ‘read_cr2’? [-Werror=implicit-function-declaration]
  vmcs_writel(HOST_CR3, read_cr3());  /* 22.2.3 */
                        ^~~~~~~~
                        read_cr2
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘segment_base’:
/home/stella/Documents/sources/dune/kern/vmx.c:613:64: error: dereferencing pointer to incomplete type ‘struct ldttss_desc64’
                v |= ((unsigned long)((struct ldttss_desc64 *)d)->base3) << 32;
                                                                ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_run_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1481:3: error: expected ‘:’ or ‘)’ before ‘ASM_VMX_VMWRITE_RSP_RDX’
   ASM_VMX_VMWRITE_RSP_RDX "\n\t"
   ^~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ gedit kern/vmx.h
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:131:26: error: ‘struct fpu’ has no member named ‘fpregs_active’
  if (!current->thread.fpu.fpregs_active)
                          ^
/home/stella/Documents/sources/dune/kern/compat.h:132:3: error: implicit declaration of function ‘fpu__restore’; did you mean ‘fpu__restore_sig’? [-Werror=implicit-function-declaration]
   fpu__restore(&current->thread.fpu);
   ^~~~~~~~~~~~
   fpu__restore_sig
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_setup_constant_host_state’:
/home/stella/Documents/sources/dune/kern/vmx.c:542:24: error: implicit declaration of function ‘read_cr3’; did you mean ‘read_cr2’? [-Werror=implicit-function-declaration]
  vmcs_writel(HOST_CR3, read_cr3());  /* 22.2.3 */
                        ^~~~~~~~
                        read_cr2
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘segment_base’:
/home/stella/Documents/sources/dune/kern/vmx.c:613:64: error: dereferencing pointer to incomplete type ‘struct ldttss_desc64’
                v |= ((unsigned long)((struct ldttss_desc64 *)d)->base3) << 32;
                                                                ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘fpu__restore’:
/home/stella/Documents/sources/dune/kern/compat.h:142:2: error: implicit declaration of function ‘fpu__initialize’; did you mean ‘acpi_os_initialize’? [-Werror=implicit-function-declaration]
  fpu__initialize(fpu);
  ^~~~~~~~~~~~~~~
  acpi_os_initialize
/home/stella/Documents/sources/dune/kern/compat.h:145:2: error: implicit declaration of function ‘kernel_fpu_disable’; did you mean ‘perf_pmu_disable’? [-Werror=implicit-function-declaration]
  kernel_fpu_disable();
  ^~~~~~~~~~~~~~~~~~
  perf_pmu_disable
/home/stella/Documents/sources/dune/kern/compat.h:150:2: error: implicit declaration of function ‘kernel_fpu_enable’; did you mean ‘kernel_fpu_end’? [-Werror=implicit-function-declaration]
  kernel_fpu_enable();
  ^~~~~~~~~~~~~~~~~
  kernel_fpu_end
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:156:26: error: ‘struct fpu’ has no member named ‘fpregs_active’
  if (!current->thread.fpu.fpregs_active)
                          ^
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_setup_constant_host_state’:
/home/stella/Documents/sources/dune/kern/vmx.c:542:24: error: implicit declaration of function ‘read_cr3’; did you mean ‘read_cr2’? [-Werror=implicit-function-declaration]
  vmcs_writel(HOST_CR3, read_cr3());  /* 22.2.3 */
                        ^~~~~~~~
                        read_cr2
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘segment_base’:
/home/stella/Documents/sources/dune/kern/vmx.c:613:64: error: dereferencing pointer to incomplete type ‘struct ldttss_desc64’
                v |= ((unsigned long)((struct ldttss_desc64 *)d)->base3) << 32;
                                                                ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
In file included from ./arch/x86/include/asm/bug.h:83:0,
                 from ./include/linux/bug.h:5,
                 from ./include/linux/thread_info.h:12,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘kernel_fpu_disable’:
/home/stella/Documents/sources/dune/kern/compat.h:132:28: error: ‘in_kernel_fpu’ undeclared (first use in this function); did you mean ‘is_kernel’?
  WARN_ON_FPU(this_cpu_read(in_kernel_fpu));
                            ^
./include/asm-generic/bug.h:96:25: note: in definition of macro ‘WARN_ON_ONCE’
  int __ret_warn_on = !!(condition);   \
                         ^~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:2: note: in expansion of macro ‘WARN_ON_FPU’
  WARN_ON_FPU(this_cpu_read(in_kernel_fpu));
  ^~~~~~~~~~~
./include/linux/percpu-defs.h:507:29: note: in expansion of macro ‘__pcpu_size_call_return’
 #define this_cpu_read(pcp)  __pcpu_size_call_return(this_cpu_read_, pcp)
                             ^~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:14: note: in expansion of macro ‘this_cpu_read’
  WARN_ON_FPU(this_cpu_read(in_kernel_fpu));
              ^~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:28: note: each undeclared identifier is reported only once for each function it appears in
  WARN_ON_FPU(this_cpu_read(in_kernel_fpu));
                            ^
./include/asm-generic/bug.h:96:25: note: in definition of macro ‘WARN_ON_ONCE’
  int __ret_warn_on = !!(condition);   \
                         ^~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:2: note: in expansion of macro ‘WARN_ON_FPU’
  WARN_ON_FPU(this_cpu_read(in_kernel_fpu));
  ^~~~~~~~~~~
./include/linux/percpu-defs.h:507:29: note: in expansion of macro ‘__pcpu_size_call_return’
 #define this_cpu_read(pcp)  __pcpu_size_call_return(this_cpu_read_, pcp)
                             ^~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:14: note: in expansion of macro ‘this_cpu_read’
  WARN_ON_FPU(this_cpu_read(in_kernel_fpu));
              ^~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘kernel_fpu_enable’:
/home/stella/Documents/sources/dune/kern/compat.h:138:29: error: ‘in_kernel_fpu’ undeclared (first use in this function); did you mean ‘is_kernel’?
  WARN_ON_FPU(!this_cpu_read(in_kernel_fpu));
                             ^
./include/asm-generic/bug.h:96:25: note: in definition of macro ‘WARN_ON_ONCE’
  int __ret_warn_on = !!(condition);   \
                         ^~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:138:2: note: in expansion of macro ‘WARN_ON_FPU’
  WARN_ON_FPU(!this_cpu_read(in_kernel_fpu));
  ^~~~~~~~~~~
./include/linux/percpu-defs.h:507:29: note: in expansion of macro ‘__pcpu_size_call_return’
 #define this_cpu_read(pcp)  __pcpu_size_call_return(this_cpu_read_, pcp)
                             ^~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:138:15: note: in expansion of macro ‘this_cpu_read’
  WARN_ON_FPU(!this_cpu_read(in_kernel_fpu));
               ^~~~~~~~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘fpu__initialize’:
/home/stella/Documents/sources/dune/kern/compat.h:150:10: error: ‘struct fpu’ has no member named ‘initialized’
  if (!fpu->initialized) {
          ^~
/home/stella/Documents/sources/dune/kern/compat.h:154:3: error: implicit declaration of function ‘trace_x86_fpu_activate_state’; did you mean ‘trace_x86_fpu_init_state’? [-Werror=implicit-function-declaration]
   trace_x86_fpu_activate_state(fpu);
   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
   trace_x86_fpu_init_state
/home/stella/Documents/sources/dune/kern/compat.h:156:6: error: ‘struct fpu’ has no member named ‘initialized’
   fpu->initialized = 1;
      ^~
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:186:26: error: ‘struct fpu’ has no member named ‘fpregs_active’
  if (!current->thread.fpu.fpregs_active)
                          ^
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_setup_constant_host_state’:
/home/stella/Documents/sources/dune/kern/vmx.c:542:24: error: implicit declaration of function ‘read_cr3’; did you mean ‘read_cr2’? [-Werror=implicit-function-declaration]
  vmcs_writel(HOST_CR3, read_cr3());  /* 22.2.3 */
                        ^~~~~~~~
                        read_cr2
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘segment_base’:
/home/stella/Documents/sources/dune/kern/vmx.c:613:64: error: dereferencing pointer to incomplete type ‘struct ldttss_desc64’
                v |= ((unsigned long)((struct ldttss_desc64 *)d)->base3) << 32;
                                                                ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘fpu__initialize’:
/home/stella/Documents/sources/dune/kern/compat.h:153:10: error: ‘struct fpu’ has no member named ‘initialized’
  if (!fpu->initialized) {
          ^~
/home/stella/Documents/sources/dune/kern/compat.h:157:3: error: implicit declaration of function ‘trace_x86_fpu_activate_state’; did you mean ‘trace_x86_fpu_init_state’? [-Werror=implicit-function-declaration]
   trace_x86_fpu_activate_state(fpu);
   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
   trace_x86_fpu_init_state
/home/stella/Documents/sources/dune/kern/compat.h:159:6: error: ‘struct fpu’ has no member named ‘initialized’
   fpu->initialized = 1;
      ^~
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:189:26: error: ‘struct fpu’ has no member named ‘fpregs_active’
  if (!current->thread.fpu.fpregs_active)
                          ^
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_setup_constant_host_state’:
/home/stella/Documents/sources/dune/kern/vmx.c:542:24: error: implicit declaration of function ‘read_cr3’; did you mean ‘read_cr2’? [-Werror=implicit-function-declaration]
  vmcs_writel(HOST_CR3, read_cr3());  /* 22.2.3 */
                        ^~~~~~~~
                        read_cr2
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘segment_base’:
/home/stella/Documents/sources/dune/kern/vmx.c:613:64: error: dereferencing pointer to incomplete type ‘struct ldttss_desc64’
                v |= ((unsigned long)((struct ldttss_desc64 *)d)->base3) << 32;
                                                                ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘fpu__initialize’:
/home/stella/Documents/sources/dune/kern/compat.h:157:3: error: implicit declaration of function ‘trace_x86_fpu_activate_state’; did you mean ‘trace_x86_fpu_init_state’? [-Werror=implicit-function-declaration]
   trace_x86_fpu_activate_state(fpu);
   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
   trace_x86_fpu_init_state
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:189:26: error: ‘struct fpu’ has no member named ‘fpregs_active’
  if (!current->thread.fpu.fpregs_active)
                          ^
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_setup_constant_host_state’:
/home/stella/Documents/sources/dune/kern/vmx.c:542:24: error: implicit declaration of function ‘read_cr3’; did you mean ‘read_cr2’? [-Werror=implicit-function-declaration]
  vmcs_writel(HOST_CR3, read_cr3());  /* 22.2.3 */
                        ^~~~~~~~
                        read_cr2
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘segment_base’:
/home/stella/Documents/sources/dune/kern/vmx.c:613:64: error: dereferencing pointer to incomplete type ‘struct ldttss_desc64’
                v |= ((unsigned long)((struct ldttss_desc64 *)d)->base3) << 32;
                                                                ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:187:26: error: ‘struct fpu’ has no member named ‘fpregs_active’
  if (!current->thread.fpu.fpregs_active)
                          ^
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_setup_constant_host_state’:
/home/stella/Documents/sources/dune/kern/vmx.c:542:24: error: implicit declaration of function ‘read_cr3’; did you mean ‘read_cr2’? [-Werror=implicit-function-declaration]
  vmcs_writel(HOST_CR3, read_cr3());  /* 22.2.3 */
                        ^~~~~~~~
                        read_cr2
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘segment_base’:
/home/stella/Documents/sources/dune/kern/vmx.c:613:64: error: dereferencing pointer to incomplete type ‘struct ldttss_desc64’
                v |= ((unsigned long)((struct ldttss_desc64 *)d)->base3) << 32;
                                                                ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_setup_constant_host_state’:
/home/stella/Documents/sources/dune/kern/vmx.c:542:24: error: implicit declaration of function ‘read_cr3’; did you mean ‘read_cr2’? [-Werror=implicit-function-declaration]
  vmcs_writel(HOST_CR3, read_cr3());  /* 22.2.3 */
                        ^~~~~~~~
                        read_cr2
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘segment_base’:
/home/stella/Documents/sources/dune/kern/vmx.c:613:64: error: dereferencing pointer to incomplete type ‘struct ldttss_desc64’
                v |= ((unsigned long)((struct ldttss_desc64 *)d)->base3) << 32;
                                                                ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘segment_base’:
/home/stella/Documents/sources/dune/kern/vmx.c:613:64: error: dereferencing pointer to incomplete type ‘struct ldttss_desc64’
                v |= ((unsigned long)((struct ldttss_desc64 *)d)->base3) << 32;
                                                                ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: error: ‘VMX_EPT_DEFAULT_MT’ undeclared (first use in this function); did you mean ‘VMX_EPT_IPAT_BIT’?
  eptp = VMX_EPT_DEFAULT_MT |
         ^~~~~~~~~~~~~~~~~~
         VMX_EPT_IPAT_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:806:9: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:3: error: ‘VMX_EPT_DEFAULT_GAW’ undeclared (first use in this function); did you mean ‘VMX_EPT_DEFAULT_MT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
   ^~~~~~~~~~~~~~~~~~~
   VMX_EPT_DEFAULT_MT
/home/stella/Documents/sources/dune/kern/vmx.c:807:26: error: ‘VMX_EPT_GAW_EPTP_SHIFT’ undeclared (first use in this function); did you mean ‘VMX_EPT_MT_EPTE_SHIFT’?
   VMX_EPT_DEFAULT_GAW << VMX_EPT_GAW_EPTP_SHIFT;
                          ^~~~~~~~~~~~~~~~~~~~~~
                          VMX_EPT_MT_EPTE_SHIFT
/home/stella/Documents/sources/dune/kern/vmx.c:809:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1249:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1380:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1785:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2179:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:805:11: error: implicit declaration of function ‘get_ept_level’; did you mean ‘get_cpu_device’? [-Werror=implicit-function-declaration]
  eptp |= (get_ept_level(vcpu) == 5) ? VMX_EPTP_PWL_5 : VMX_EPTP_PWL_4;
           ^~~~~~~~~~~~~
           get_cpu_device
/home/stella/Documents/sources/dune/kern/vmx.c:805:25: error: ‘vcpu’ undeclared (first use in this function); did you mean ‘vcpus’?
  eptp |= (get_ept_level(vcpu) == 5) ? VMX_EPTP_PWL_5 : VMX_EPTP_PWL_4;
                         ^~~~
                         vcpus
/home/stella/Documents/sources/dune/kern/vmx.c:805:25: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c:807:6: error: ‘enable_ept_ad_bits’ undeclared (first use in this function); did you mean ‘enable_kprobe’?
  if (enable_ept_ad_bits &&
      ^~~~~~~~~~~~~~~~~~
      enable_kprobe
/home/stella/Documents/sources/dune/kern/vmx.c:808:8: error: implicit declaration of function ‘is_guest_mode’; did you mean ‘insn_get_modrm’? [-Werror=implicit-function-declaration]
      (!is_guest_mode(vcpu) || nested_ept_ad_enabled(vcpu)))
        ^~~~~~~~~~~~~
        insn_get_modrm
/home/stella/Documents/sources/dune/kern/vmx.c:808:31: error: implicit declaration of function ‘nested_ept_ad_enabled’; did you mean ‘kernel_fpu_enable’? [-Werror=implicit-function-declaration]
      (!is_guest_mode(vcpu) || nested_ept_ad_enabled(vcpu)))
                               ^~~~~~~~~~~~~~~~~~~~~
                               kernel_fpu_enable
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1258:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1389:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1794:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2188:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘construct_eptp’:
/home/stella/Documents/sources/dune/kern/vmx.c:810:11: error: ‘VMX_EPT_AD_ENABLE_BIT’ undeclared (first use in this function); did you mean ‘VMX_EPTP_AD_ENABLE_BIT’?
   eptp |= VMX_EPT_AD_ENABLE_BIT;
           ^~~~~~~~~~~~~~~~~~~~~
           VMX_EPTP_AD_ENABLE_BIT
/home/stella/Documents/sources/dune/kern/vmx.c:810:11: note: each undeclared identifier is reported only once for each function it appears in
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1250:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1381:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1786:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2180:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_create_vcpu’:
/home/stella/Documents/sources/dune/kern/vmx.c:1250:2: error: implicit declaration of function ‘native_store_idt’; did you mean ‘native_store_gdt’? [-Werror=implicit-function-declaration]
  native_store_idt(&dt);
  ^~~~~~~~~~~~~~~~
  native_store_gdt
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1381:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1786:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2180:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘make_pt_regs’:
/home/stella/Documents/sources/dune/kern/vmx.c:1381:8: error: implicit declaration of function ‘__addr_ok’; did you mean ‘d_add_ci’? [-Werror=implicit-function-declaration]
  if (!(__addr_ok(regs->ip)))
        ^~~~~~~~~
        d_add_ci
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1786:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2180:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_handle_external_interrupt’:
/home/stella/Documents/sources/dune/kern/vmx.c:1789:23: error: incompatible type for argument 1 of ‘gate_offset’
   entry = gate_offset(*desc);
                       ^
In file included from ./arch/x86/include/asm/paravirt_types.h:43:0,
                 from ./arch/x86/include/asm/ptrace.h:94,
                 from ./arch/x86/include/asm/math_emu.h:5,
                 from ./arch/x86/include/asm/processor.h:12,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/vmx.c:41:
./arch/x86/include/asm/desc_defs.h:90:29: note: expected ‘const gate_desc * {aka const struct gate_struct *}’ but argument is of type ‘gate_desc {aka struct gate_struct}’
 static inline unsigned long gate_offset(const gate_desc *g)
                             ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2183:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2183:6: error: void value not ignored as it ought to be
  if (on_each_cpu(vmx_enable, NULL, 1)) {
      ^~~~~~~~~~~
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:753:3: error: ‘const struct mmu_notifier_ops’ has no member named ‘invalidate_page’; did you mean ‘invalidate_range’?
  .invalidate_page = ept_mmu_notifier_invalidate_page,
   ^~~~~~~~~~~~~~~
   invalidate_range
/home/stella/Documents/sources/dune/kern/ept.c:753:21: error: initialization from incompatible pointer type [-Werror=incompatible-pointer-types]
  .invalidate_page = ept_mmu_notifier_invalidate_page,
                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/ept.c:753:21: note: (near initialization for ‘ept_mmu_notifier_ops.release’)
/home/stella/Documents/sources/dune/kern/ept.c:754:28: error: initialization from incompatible pointer type [-Werror=incompatible-pointer-types]
  .invalidate_range_start = ept_mmu_notifier_invalidate_range_start,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/ept.c:754:28: note: (near initialization for ‘ept_mmu_notifier_ops.invalidate_range_start’)
/home/stella/Documents/sources/dune/kern/ept.c:755:26: error: initialization from incompatible pointer type [-Werror=incompatible-pointer-types]
  .invalidate_range_end = ept_mmu_notifier_invalidate_range_end,
                          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/ept.c:755:26: note: (near initialization for ‘ept_mmu_notifier_ops.invalidate_range_end’)
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/ept.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/ept.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:756:28: error: initialization from incompatible pointer type [-Werror=incompatible-pointer-types]
  .invalidate_range_start = ept_mmu_notifier_invalidate_range_start,
                            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/ept.c:756:28: note: (near initialization for ‘ept_mmu_notifier_ops.invalidate_range_start’)
/home/stella/Documents/sources/dune/kern/ept.c:757:26: error: initialization from incompatible pointer type [-Werror=incompatible-pointer-types]
  .invalidate_range_end = ept_mmu_notifier_invalidate_range_end,
                          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/ept.c:757:26: note: (near initialization for ‘ept_mmu_notifier_ops.invalidate_range_end’)
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/ept.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/ept.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/rcupdate.h:27,
                 from ./include/linux/rculist.h:11,
                 from ./include/linux/pid.h:5,
                 from ./include/linux/sched.h:14,
                 from ./include/linux/uaccess.h:5,
                 from /home/stella/Documents/sources/dune/kern/preempttrap.c:1:
/home/stella/Documents/sources/dune/kern/preempttrap.c: In function ‘notifier_sched_in’:
./arch/x86/include/asm/processor.h:815:39: error: implicit declaration of function ‘task_stack_page’; did you mean ‘task_spread_page’? [-Werror=implicit-function-declaration]
  unsigned long __ptr = (unsigned long)task_stack_page(task); \
                                       ^
./arch/x86/include/asm/processor.h:898:26: note: in expansion of macro ‘task_pt_regs’
 #define KSTK_EIP(task)  (task_pt_regs(task)->ip)
                          ^~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/preempttrap.c:16:31: note: in expansion of macro ‘KSTK_EIP’
  if (!trap_state.triggered && KSTK_EIP(current) == trap_conf.trigger_rip) {
                               ^~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/preempttrap.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/preempttrap.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
In file included from ./include/linux/rcupdate.h:28:0,
                 from ./include/linux/rculist.h:11,
                 from ./include/linux/pid.h:5,
                 from ./include/linux/sched.h:14,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/bottom_half.h: In function ‘__local_bh_disable_ip’:
./include/linux/bottom_half.h:12:2: error: implicit declaration of function ‘preempt_count_add’ [-Werror=implicit-function-declaration]
  preempt_count_add(cnt);
  ^~~~~~~~~~~~~~~~~
In file included from ./include/linux/rculist.h:11:0,
                 from ./include/linux/pid.h:5,
                 from ./include/linux/sched.h:14,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/rcupdate.h: In function ‘__rcu_read_lock’:
./include/linux/rcupdate.h:59:2: error: implicit declaration of function ‘preempt_disable’; did you mean ‘irqs_disabled’? [-Werror=implicit-function-declaration]
  preempt_disable();
  ^~~~~~~~~~~~~~~
  irqs_disabled
./include/linux/rcupdate.h: In function ‘__rcu_read_unlock’:
./include/linux/rcupdate.h:64:2: error: implicit declaration of function ‘preempt_enable’; did you mean ‘sme_enable’? [-Werror=implicit-function-declaration]
  preempt_enable();
  ^~~~~~~~~~~~~~
  sme_enable
In file included from ./include/linux/rculist.h:11:0,
                 from ./include/linux/pid.h:5,
                 from ./include/linux/sched.h:14,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/rcupdate.h: In function ‘rcu_read_lock_sched_held’:
./include/linux/rcupdate.h:245:10: error: implicit declaration of function ‘preemptible’ [-Werror=implicit-function-declaration]
  return !preemptible();
          ^~~~~~~~~~~
./include/linux/rcupdate.h: In function ‘rcu_read_lock_sched_notrace’:
./include/linux/rcupdate.h:717:2: error: implicit declaration of function ‘preempt_disable_notrace’; did you mean ‘paravirt_disable_iospace’? [-Werror=implicit-function-declaration]
  preempt_disable_notrace();
  ^~~~~~~~~~~~~~~~~~~~~~~
  paravirt_disable_iospace
./include/linux/rcupdate.h: In function ‘rcu_read_unlock_sched_notrace’:
./include/linux/rcupdate.h:739:2: error: implicit declaration of function ‘preempt_enable_notrace’; did you mean ‘paravirt_disable_iospace’? [-Werror=implicit-function-declaration]
  preempt_enable_notrace();
  ^~~~~~~~~~~~~~~~~~~~~~
  paravirt_disable_iospace
In file included from ./include/linux/pid.h:6:0,
                 from ./include/linux/sched.h:14,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/wait.h: At top level:
./include/linux/wait.h:35:2: error: unknown type name ‘spinlock_t’
  spinlock_t  lock;
  ^~~~~~~~~~
In file included from ./include/linux/time.h:6:0,
                 from ./include/linux/ktime.h:24,
                 from ./include/linux/timer.h:6,
                 from ./include/linux/workqueue.h:9,
                 from ./include/linux/rhashtable-types.h:15,
                 from ./include/linux/ipc.h:7,
                 from ./include/uapi/linux/sem.h:5,
                 from ./include/linux/sem.h:5,
                 from ./include/linux/sched.h:15,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/seqlock.h: In function ‘__read_seqcount_begin’:
./include/linux/seqlock.h:115:3: error: implicit declaration of function ‘cpu_relax’; did you mean ‘xchg_relaxed’? [-Werror=implicit-function-declaration]
   cpu_relax();
   ^~~~~~~~~
   xchg_relaxed
./include/linux/seqlock.h: In function ‘write_seqlock’:
./include/linux/seqlock.h:455:2: error: implicit declaration of function ‘spin_lock’; did you mean ‘osq_lock’? [-Werror=implicit-function-declaration]
  spin_lock(&sl->lock);
  ^~~~~~~~~
  osq_lock
./include/linux/seqlock.h: In function ‘write_sequnlock’:
./include/linux/seqlock.h:462:2: error: implicit declaration of function ‘spin_unlock’; did you mean ‘osq_unlock’? [-Werror=implicit-function-declaration]
  spin_unlock(&sl->lock);
  ^~~~~~~~~~~
  osq_unlock
./include/linux/seqlock.h: In function ‘write_seqlock_bh’:
./include/linux/seqlock.h:467:2: error: implicit declaration of function ‘spin_lock_bh’; did you mean ‘write_seqlock_bh’? [-Werror=implicit-function-declaration]
  spin_lock_bh(&sl->lock);
  ^~~~~~~~~~~~
  write_seqlock_bh
./include/linux/seqlock.h: In function ‘write_sequnlock_bh’:
./include/linux/seqlock.h:474:2: error: implicit declaration of function ‘spin_unlock_bh’; did you mean ‘write_sequnlock_bh’? [-Werror=implicit-function-declaration]
  spin_unlock_bh(&sl->lock);
  ^~~~~~~~~~~~~~
  write_sequnlock_bh
./include/linux/seqlock.h: In function ‘write_seqlock_irq’:
./include/linux/seqlock.h:479:2: error: implicit declaration of function ‘spin_lock_irq’; did you mean ‘spin_acquire’? [-Werror=implicit-function-declaration]
  spin_lock_irq(&sl->lock);
  ^~~~~~~~~~~~~
  spin_acquire
./include/linux/seqlock.h: In function ‘write_sequnlock_irq’:
./include/linux/seqlock.h:486:2: error: implicit declaration of function ‘spin_unlock_irq’; did you mean ‘write_sequnlock_irq’? [-Werror=implicit-function-declaration]
  spin_unlock_irq(&sl->lock);
  ^~~~~~~~~~~~~~~
  write_sequnlock_irq
./include/linux/seqlock.h: In function ‘__write_seqlock_irqsave’:
./include/linux/seqlock.h:493:2: error: implicit declaration of function ‘spin_lock_irqsave’; did you mean ‘arch_local_irq_save’? [-Werror=implicit-function-declaration]
  spin_lock_irqsave(&sl->lock, flags);
  ^~~~~~~~~~~~~~~~~
  arch_local_irq_save
./include/linux/seqlock.h: In function ‘write_sequnlock_irqrestore’:
./include/linux/seqlock.h:505:2: error: implicit declaration of function ‘spin_unlock_irqrestore’; did you mean ‘write_sequnlock_irqrestore’? [-Werror=implicit-function-declaration]
  spin_unlock_irqrestore(&sl->lock, flags);
  ^~~~~~~~~~~~~~~~~~~~~~
  write_sequnlock_irqrestore
In file included from ./arch/x86/include/asm/timex.h:6:0,
                 from ./include/linux/timex.h:67,
                 from ./include/linux/time32.h:13,
                 from ./include/linux/time.h:73,
                 from ./include/linux/ktime.h:24,
                 from ./include/linux/timer.h:6,
                 from ./include/linux/workqueue.h:9,
                 from ./include/linux/rhashtable-types.h:15,
                 from ./include/linux/ipc.h:7,
                 from ./include/uapi/linux/sem.h:5,
                 from ./include/linux/sem.h:5,
                 from ./include/linux/sched.h:15,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./arch/x86/include/asm/tsc.h: In function ‘get_cycles’:
./arch/x86/include/asm/tsc.h:26:7: error: implicit declaration of function ‘cpu_feature_enabled’ [-Werror=implicit-function-declaration]
      !cpu_feature_enabled(X86_FEATURE_TSC))
       ^~~~~~~~~~~~~~~~~~~
In file included from ./arch/x86/include/asm/fixmap.h:29:0,
                 from ./arch/x86/include/asm/apic.h:11,
                 from ./arch/x86/include/asm/smp.h:13,
                 from ./include/linux/smp.h:68,
                 from ./include/linux/percpu.h:7,
                 from ./include/linux/hrtimer.h:19,
                 from ./include/linux/sched.h:20,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./arch/x86/include/asm/acpi.h: In function ‘acpi_processor_cstate_check’:
./arch/x86/include/asm/acpi.h:78:6: error: ‘boot_cpu_data’ undeclared (first use in this function); did you mean ‘get_cpu_mask’?
  if (boot_cpu_data.x86 == 0x0F &&
      ^~~~~~~~~~~~~
      get_cpu_mask
./arch/x86/include/asm/acpi.h:78:6: note: each undeclared identifier is reported only once for each function it appears in
./arch/x86/include/asm/acpi.h:79:34: error: ‘X86_VENDOR_AMD’ undeclared (first use in this function); did you mean ‘X86_FEATURE_TM2’?
      boot_cpu_data.x86_vendor == X86_VENDOR_AMD &&
                                  ^~~~~~~~~~~~~~
                                  X86_FEATURE_TM2
./arch/x86/include/asm/acpi.h:83:11: error: implicit declaration of function ‘boot_cpu_has’; did you mean ‘get_cpu_mask’? [-Werror=implicit-function-declaration]
  else if (boot_cpu_has(X86_BUG_AMD_APIC_C1E))
           ^~~~~~~~~~~~
           get_cpu_mask
./arch/x86/include/asm/acpi.h: In function ‘arch_has_acpi_pdc’:
./arch/x86/include/asm/acpi.h:91:27: error: implicit declaration of function ‘cpu_data’ [-Werror=implicit-function-declaration]
  struct cpuinfo_x86 *c = &cpu_data(0);
                           ^~~~~~~~
./arch/x86/include/asm/acpi.h:91:26: error: lvalue required as unary ‘&’ operand
  struct cpuinfo_x86 *c = &cpu_data(0);
                          ^
./arch/x86/include/asm/acpi.h:92:11: error: dereferencing pointer to incomplete type ‘struct cpuinfo_x86’
  return (c->x86_vendor == X86_VENDOR_INTEL ||
           ^~
./arch/x86/include/asm/acpi.h:92:27: error: ‘X86_VENDOR_INTEL’ undeclared (first use in this function); did you mean ‘X86_FEATURE_NOPL’?
  return (c->x86_vendor == X86_VENDOR_INTEL ||
                           ^~~~~~~~~~~~~~~~
                           X86_FEATURE_NOPL
./arch/x86/include/asm/acpi.h:93:20: error: ‘X86_VENDOR_CENTAUR’ undeclared (first use in this function); did you mean ‘X86_VENDOR_INTEL’?
   c->x86_vendor == X86_VENDOR_CENTAUR);
                    ^~~~~~~~~~~~~~~~~~
                    X86_VENDOR_INTEL
./arch/x86/include/asm/acpi.h: In function ‘arch_acpi_set_pdc_bits’:
./arch/x86/include/asm/acpi.h:98:26: error: lvalue required as unary ‘&’ operand
  struct cpuinfo_x86 *c = &cpu_data(0);
                          ^
./arch/x86/include/asm/acpi.h:102:6: error: implicit declaration of function ‘cpu_has’ [-Werror=implicit-function-declaration]
  if (cpu_has(c, X86_FEATURE_EST))
      ^~~~~~~
In file included from ./include/asm-generic/bug.h:5:0,
                 from ./arch/x86/include/asm/bug.h:83,
                 from ./include/linux/bug.h:5,
                 from ./include/linux/mmdebug.h:5,
                 from ./include/linux/mm.h:9,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/seccomp.h: In function ‘secure_computing’:
./include/linux/seccomp.h:38:15: error: implicit declaration of function ‘test_thread_flag’; did you mean ‘do_set_thread_area’? [-Werror=implicit-function-declaration]
  if (unlikely(test_thread_flag(TIF_SECCOMP)))
               ^
./include/linux/compiler.h:78:42: note: in definition of macro ‘unlikely’
 # define unlikely(x) __builtin_expect(!!(x), 0)
                                          ^
./include/linux/seccomp.h:38:32: error: ‘TIF_SECCOMP’ undeclared (first use in this function); did you mean ‘CONFIG_SECCOMP’?
  if (unlikely(test_thread_flag(TIF_SECCOMP)))
                                ^
./include/linux/compiler.h:78:42: note: in definition of macro ‘unlikely’
 # define unlikely(x) __builtin_expect(!!(x), 0)
                                          ^
In file included from ./include/linux/sched/task_stack.h:9:0,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h: At top level:
./include/linux/sched.h:634:22: error: field ‘thread_info’ has incomplete type
  struct thread_info  thread_info;
                      ^~~~~~~~~~~
./include/linux/sched.h:1283:24: error: field ‘thread’ has incomplete type
  struct thread_struct  thread;
                        ^~~~~~
./include/linux/sched.h: In function ‘set_tsk_thread_flag’:
./include/linux/sched.h:1717:2: error: implicit declaration of function ‘set_ti_thread_flag’; did you mean ‘set_tsk_thread_flag’? [-Werror=implicit-function-declaration]
  set_ti_thread_flag(task_thread_info(tsk), flag);
  ^~~~~~~~~~~~~~~~~~
  set_tsk_thread_flag
./include/linux/sched.h: In function ‘clear_tsk_thread_flag’:
./include/linux/sched.h:1722:2: error: implicit declaration of function ‘clear_ti_thread_flag’; did you mean ‘clear_tsk_thread_flag’? [-Werror=implicit-function-declaration]
  clear_ti_thread_flag(task_thread_info(tsk), flag);
  ^~~~~~~~~~~~~~~~~~~~
  clear_tsk_thread_flag
./include/linux/sched.h: In function ‘update_tsk_thread_flag’:
./include/linux/sched.h:1728:2: error: implicit declaration of function ‘update_ti_thread_flag’; did you mean ‘update_tsk_thread_flag’? [-Werror=implicit-function-declaration]
  update_ti_thread_flag(task_thread_info(tsk), flag, value);
  ^~~~~~~~~~~~~~~~~~~~~
  update_tsk_thread_flag
./include/linux/sched.h: In function ‘test_and_set_tsk_thread_flag’:
./include/linux/sched.h:1733:9: error: implicit declaration of function ‘test_and_set_ti_thread_flag’; did you mean ‘test_and_set_tsk_thread_flag’? [-Werror=implicit-function-declaration]
  return test_and_set_ti_thread_flag(task_thread_info(tsk), flag);
         ^~~~~~~~~~~~~~~~~~~~~~~~~~~
         test_and_set_tsk_thread_flag
./include/linux/sched.h: In function ‘test_and_clear_tsk_thread_flag’:
./include/linux/sched.h:1738:9: error: implicit declaration of function ‘test_and_clear_ti_thread_flag’; did you mean ‘test_and_clear_tsk_thread_flag’? [-Werror=implicit-function-declaration]
  return test_and_clear_ti_thread_flag(task_thread_info(tsk), flag);
         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
         test_and_clear_tsk_thread_flag
./include/linux/sched.h: In function ‘test_tsk_thread_flag’:
./include/linux/sched.h:1743:9: error: implicit declaration of function ‘test_ti_thread_flag’; did you mean ‘test_tsk_thread_flag’? [-Werror=implicit-function-declaration]
  return test_ti_thread_flag(task_thread_info(tsk), flag);
         ^~~~~~~~~~~~~~~~~~~
         test_tsk_thread_flag
./include/linux/sched.h: In function ‘set_tsk_need_resched’:
./include/linux/sched.h:1748:26: error: ‘TIF_NEED_RESCHED’ undeclared (first use in this function)
  set_tsk_thread_flag(tsk,TIF_NEED_RESCHED);
                          ^~~~~~~~~~~~~~~~
./include/linux/sched.h: In function ‘clear_tsk_need_resched’:
./include/linux/sched.h:1753:28: error: ‘TIF_NEED_RESCHED’ undeclared (first use in this function)
  clear_tsk_thread_flag(tsk,TIF_NEED_RESCHED);
                            ^~~~~~~~~~~~~~~~
In file included from ./include/asm-generic/bug.h:5:0,
                 from ./arch/x86/include/asm/bug.h:83,
                 from ./include/linux/bug.h:5,
                 from ./include/linux/mmdebug.h:5,
                 from ./include/linux/mm.h:9,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h: In function ‘test_tsk_need_resched’:
./include/linux/sched.h:1758:43: error: ‘TIF_NEED_RESCHED’ undeclared (first use in this function)
  return unlikely(test_tsk_thread_flag(tsk,TIF_NEED_RESCHED));
                                           ^
./include/linux/compiler.h:78:42: note: in definition of macro ‘unlikely’
 # define unlikely(x) __builtin_expect(!!(x), 0)
                                          ^
./include/linux/sched.h: In function ‘need_resched’:
./include/linux/sched.h:1810:18: error: implicit declaration of function ‘tif_need_resched’; did you mean ‘need_resched’? [-Werror=implicit-function-declaration]
  return unlikely(tif_need_resched());
                  ^
./include/linux/compiler.h:78:42: note: in definition of macro ‘unlikely’
 # define unlikely(x) __builtin_expect(!!(x), 0)
                                          ^
In file included from ./include/linux/sched/task_stack.h:9:0,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h: In function ‘rseq_set_notify_resume’:
./include/linux/sched.h:1885:26: error: ‘TIF_NOTIFY_RESUME’ undeclared (first use in this function); did you mean ‘APM_NORMAL_RESUME’?
   set_tsk_thread_flag(t, TIF_NOTIFY_RESUME);
                          ^~~~~~~~~~~~~~~~~
                          APM_NORMAL_RESUME
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./arch/x86/include/asm/processor.h: At top level:
./arch/x86/include/asm/processor.h:645:29: warning: conflicting types for ‘cpu_relax’
 static __always_inline void cpu_relax(void)
                             ^~~~~~~~~
./arch/x86/include/asm/processor.h:645:29: error: static declaration of ‘cpu_relax’ follows non-static declaration
In file included from ./include/linux/time.h:6:0,
                 from ./include/linux/ktime.h:24,
                 from ./include/linux/timer.h:6,
                 from ./include/linux/workqueue.h:9,
                 from ./include/linux/rhashtable-types.h:15,
                 from ./include/linux/ipc.h:7,
                 from ./include/uapi/linux/sem.h:5,
                 from ./include/linux/sem.h:5,
                 from ./include/linux/sched.h:15,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/seqlock.h:115:3: note: previous implicit declaration of ‘cpu_relax’ was here
   cpu_relax();
   ^~~~~~~~~
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./arch/x86/include/asm/processor.h:875:0: warning: "TASK_SIZE_OF" redefined
 #define TASK_SIZE_OF(child) ((test_tsk_thread_flag(child, TIF_ADDR32)) ? \
 
In file included from ./include/linux/sched/task_stack.h:9:0,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h:1861:0: note: this is the location of the previous definition
 #define TASK_SIZE_OF(tsk) TASK_SIZE
 
In file included from ./arch/x86/include/asm/preempt.h:7:0,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/thread_info.h:66:20: warning: conflicting types for ‘set_ti_thread_flag’
 static inline void set_ti_thread_flag(struct thread_info *ti, int flag)
                    ^~~~~~~~~~~~~~~~~~
./include/linux/thread_info.h:66:20: error: static declaration of ‘set_ti_thread_flag’ follows non-static declaration
In file included from ./include/linux/sched/task_stack.h:9:0,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h:1717:2: note: previous implicit declaration of ‘set_ti_thread_flag’ was here
  set_ti_thread_flag(task_thread_info(tsk), flag);
  ^~~~~~~~~~~~~~~~~~
In file included from ./arch/x86/include/asm/preempt.h:7:0,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/thread_info.h:71:20: warning: conflicting types for ‘clear_ti_thread_flag’
 static inline void clear_ti_thread_flag(struct thread_info *ti, int flag)
                    ^~~~~~~~~~~~~~~~~~~~
./include/linux/thread_info.h:71:20: error: static declaration of ‘clear_ti_thread_flag’ follows non-static declaration
In file included from ./include/linux/sched/task_stack.h:9:0,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h:1722:2: note: previous implicit declaration of ‘clear_ti_thread_flag’ was here
  clear_ti_thread_flag(task_thread_info(tsk), flag);
  ^~~~~~~~~~~~~~~~~~~~
In file included from ./arch/x86/include/asm/preempt.h:7:0,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/thread_info.h:76:20: warning: conflicting types for ‘update_ti_thread_flag’
 static inline void update_ti_thread_flag(struct thread_info *ti, int flag,
                    ^~~~~~~~~~~~~~~~~~~~~
./include/linux/thread_info.h:76:20: error: static declaration of ‘update_ti_thread_flag’ follows non-static declaration
In file included from ./include/linux/sched/task_stack.h:9:0,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h:1728:2: note: previous implicit declaration of ‘update_ti_thread_flag’ was here
  update_ti_thread_flag(task_thread_info(tsk), flag, value);
  ^~~~~~~~~~~~~~~~~~~~~
In file included from ./arch/x86/include/asm/preempt.h:7:0,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/thread_info.h:85:19: error: static declaration of ‘test_and_set_ti_thread_flag’ follows non-static declaration
 static inline int test_and_set_ti_thread_flag(struct thread_info *ti, int flag)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from ./include/linux/sched/task_stack.h:9:0,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h:1733:9: note: previous implicit declaration of ‘test_and_set_ti_thread_flag’ was here
  return test_and_set_ti_thread_flag(task_thread_info(tsk), flag);
         ^~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from ./arch/x86/include/asm/preempt.h:7:0,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/thread_info.h:90:19: error: static declaration of ‘test_and_clear_ti_thread_flag’ follows non-static declaration
 static inline int test_and_clear_ti_thread_flag(struct thread_info *ti, int flag)
                   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from ./include/linux/sched/task_stack.h:9:0,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h:1738:9: note: previous implicit declaration of ‘test_and_clear_ti_thread_flag’ was here
  return test_and_clear_ti_thread_flag(task_thread_info(tsk), flag);
         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from ./arch/x86/include/asm/preempt.h:7:0,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/thread_info.h:95:19: error: static declaration of ‘test_ti_thread_flag’ follows non-static declaration
 static inline int test_ti_thread_flag(struct thread_info *ti, int flag)
                   ^~~~~~~~~~~~~~~~~~~
In file included from ./include/linux/sched/task_stack.h:9:0,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h:1743:9: note: previous implicit declaration of ‘test_ti_thread_flag’ was here
  return test_ti_thread_flag(task_thread_info(tsk), flag);
         ^~~~~~~~~~~~~~~~~~~
In file included from ./arch/x86/include/asm/spinlock.h:27:0,
                 from ./include/linux/spinlock.h:89,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./arch/x86/include/asm/qspinlock.h:58:27: error: conflicting types for ‘vcpu_is_preempted’
 #define vcpu_is_preempted vcpu_is_preempted
                           ^
./arch/x86/include/asm/qspinlock.h:59:20: note: in expansion of macro ‘vcpu_is_preempted’
 static inline bool vcpu_is_preempted(long cpu)
                    ^~~~~~~~~~~~~~~~~
In file included from ./include/linux/sched/task_stack.h:9:0,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/sched.h:1851:20: note: previous definition of ‘vcpu_is_preempted’ was here
 static inline bool vcpu_is_preempted(int cpu)
                    ^~~~~~~~~~~~~~~~~
In file included from ./include/linux/mmzone.h:8:0,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/spinlock.h:336:29: warning: conflicting types for ‘spin_lock’
 static __always_inline void spin_lock(spinlock_t *lock)
                             ^~~~~~~~~
./include/linux/spinlock.h:336:29: error: static declaration of ‘spin_lock’ follows non-static declaration
In file included from ./include/linux/time.h:6:0,
                 from ./include/linux/ktime.h:24,
                 from ./include/linux/timer.h:6,
                 from ./include/linux/workqueue.h:9,
                 from ./include/linux/rhashtable-types.h:15,
                 from ./include/linux/ipc.h:7,
                 from ./include/uapi/linux/sem.h:5,
                 from ./include/linux/sem.h:5,
                 from ./include/linux/sched.h:15,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/seqlock.h:455:2: note: previous implicit declaration of ‘spin_lock’ was here
  spin_lock(&sl->lock);
  ^~~~~~~~~
In file included from ./include/linux/mmzone.h:8:0,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/spinlock.h:341:29: warning: conflicting types for ‘spin_lock_bh’
 static __always_inline void spin_lock_bh(spinlock_t *lock)
                             ^~~~~~~~~~~~
./include/linux/spinlock.h:341:29: error: static declaration of ‘spin_lock_bh’ follows non-static declaration
In file included from ./include/linux/time.h:6:0,
                 from ./include/linux/ktime.h:24,
                 from ./include/linux/timer.h:6,
                 from ./include/linux/workqueue.h:9,
                 from ./include/linux/rhashtable-types.h:15,
                 from ./include/linux/ipc.h:7,
                 from ./include/uapi/linux/sem.h:5,
                 from ./include/linux/sem.h:5,
                 from ./include/linux/sched.h:15,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/seqlock.h:467:2: note: previous implicit declaration of ‘spin_lock_bh’ was here
  spin_lock_bh(&sl->lock);
  ^~~~~~~~~~~~
In file included from ./include/linux/mmzone.h:8:0,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/spinlock.h:361:29: warning: conflicting types for ‘spin_lock_irq’
 static __always_inline void spin_lock_irq(spinlock_t *lock)
                             ^~~~~~~~~~~~~
./include/linux/spinlock.h:361:29: error: static declaration of ‘spin_lock_irq’ follows non-static declaration
In file included from ./include/linux/time.h:6:0,
                 from ./include/linux/ktime.h:24,
                 from ./include/linux/timer.h:6,
                 from ./include/linux/workqueue.h:9,
                 from ./include/linux/rhashtable-types.h:15,
                 from ./include/linux/ipc.h:7,
                 from ./include/uapi/linux/sem.h:5,
                 from ./include/linux/sem.h:5,
                 from ./include/linux/sched.h:15,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/seqlock.h:479:2: note: previous implicit declaration of ‘spin_lock_irq’ was here
  spin_lock_irq(&sl->lock);
  ^~~~~~~~~~~~~
In file included from ./include/linux/mmzone.h:8:0,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/spinlock.h:376:29: warning: conflicting types for ‘spin_unlock’
 static __always_inline void spin_unlock(spinlock_t *lock)
                             ^~~~~~~~~~~
./include/linux/spinlock.h:376:29: error: static declaration of ‘spin_unlock’ follows non-static declaration
In file included from ./include/linux/time.h:6:0,
                 from ./include/linux/ktime.h:24,
                 from ./include/linux/timer.h:6,
                 from ./include/linux/workqueue.h:9,
                 from ./include/linux/rhashtable-types.h:15,
                 from ./include/linux/ipc.h:7,
                 from ./include/uapi/linux/sem.h:5,
                 from ./include/linux/sem.h:5,
                 from ./include/linux/sched.h:15,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/seqlock.h:462:2: note: previous implicit declaration of ‘spin_unlock’ was here
  spin_unlock(&sl->lock);
  ^~~~~~~~~~~
In file included from ./include/linux/mmzone.h:8:0,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/spinlock.h:381:29: warning: conflicting types for ‘spin_unlock_bh’
 static __always_inline void spin_unlock_bh(spinlock_t *lock)
                             ^~~~~~~~~~~~~~
./include/linux/spinlock.h:381:29: error: static declaration of ‘spin_unlock_bh’ follows non-static declaration
In file included from ./include/linux/time.h:6:0,
                 from ./include/linux/ktime.h:24,
                 from ./include/linux/timer.h:6,
                 from ./include/linux/workqueue.h:9,
                 from ./include/linux/rhashtable-types.h:15,
                 from ./include/linux/ipc.h:7,
                 from ./include/uapi/linux/sem.h:5,
                 from ./include/linux/sem.h:5,
                 from ./include/linux/sched.h:15,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/seqlock.h:474:2: note: previous implicit declaration of ‘spin_unlock_bh’ was here
  spin_unlock_bh(&sl->lock);
  ^~~~~~~~~~~~~~
In file included from ./include/linux/mmzone.h:8:0,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/spinlock.h:386:29: warning: conflicting types for ‘spin_unlock_irq’
 static __always_inline void spin_unlock_irq(spinlock_t *lock)
                             ^~~~~~~~~~~~~~~
./include/linux/spinlock.h:386:29: error: static declaration of ‘spin_unlock_irq’ follows non-static declaration
In file included from ./include/linux/time.h:6:0,
                 from ./include/linux/ktime.h:24,
                 from ./include/linux/timer.h:6,
                 from ./include/linux/workqueue.h:9,
                 from ./include/linux/rhashtable-types.h:15,
                 from ./include/linux/ipc.h:7,
                 from ./include/uapi/linux/sem.h:5,
                 from ./include/linux/sem.h:5,
                 from ./include/linux/sched.h:15,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/seqlock.h:486:2: note: previous implicit declaration of ‘spin_unlock_irq’ was here
  spin_unlock_irq(&sl->lock);
  ^~~~~~~~~~~~~~~
In file included from ./include/linux/mmzone.h:8:0,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/spinlock.h:391:29: warning: conflicting types for ‘spin_unlock_irqrestore’
 static __always_inline void spin_unlock_irqrestore(spinlock_t *lock, unsigned long flags)
                             ^~~~~~~~~~~~~~~~~~~~~~
./include/linux/spinlock.h:391:29: error: static declaration of ‘spin_unlock_irqrestore’ follows non-static declaration
In file included from ./include/linux/time.h:6:0,
                 from ./include/linux/ktime.h:24,
                 from ./include/linux/timer.h:6,
                 from ./include/linux/workqueue.h:9,
                 from ./include/linux/rhashtable-types.h:15,
                 from ./include/linux/ipc.h:7,
                 from ./include/uapi/linux/sem.h:5,
                 from ./include/linux/sem.h:5,
                 from ./include/linux/sched.h:15,
                 from ./include/linux/sched/task_stack.h:9,
                 from ./arch/x86/include/asm/processor.h:35,
                 from ./arch/x86/include/asm/cpufeature.h:5,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/mmzone.h:8,
                 from ./include/linux/gfp.h:6,
                 from ./include/linux/mm.h:10,
                 from /home/stella/Documents/sources/dune/kern/apic.c:3:
./include/linux/seqlock.h:505:2: note: previous implicit declaration of ‘spin_unlock_irqrestore’ was here
  spin_unlock_irqrestore(&sl->lock, flags);
  ^~~~~~~~~~~~~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/apic.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/apic.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/rcupdate.h:27,
                 from ./include/linux/rculist.h:11,
                 from ./include/linux/pid.h:5,
                 from ./include/linux/sched.h:14,
                 from ./include/linux/uaccess.h:5,
                 from /home/stella/Documents/sources/dune/kern/preempttrap.c:1:
/home/stella/Documents/sources/dune/kern/preempttrap.c: In function ‘notifier_sched_in’:
./arch/x86/include/asm/processor.h:815:39: error: implicit declaration of function ‘task_stack_page’; did you mean ‘task_spread_page’? [-Werror=implicit-function-declaration]
  unsigned long __ptr = (unsigned long)task_stack_page(task); \
                                       ^
./arch/x86/include/asm/processor.h:898:26: note: in expansion of macro ‘task_pt_regs’
 #define KSTK_EIP(task)  (task_pt_regs(task)->ip)
                          ^~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/preempttrap.c:16:31: note: in expansion of macro ‘KSTK_EIP’
  if (!trap_state.triggered && KSTK_EIP(current) == trap_conf.trigger_rip) {
                               ^~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/preempttrap.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/preempttrap.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/core.c:19:
./arch/x86/include/asm/processor.h:813:33: error: expected identifier or ‘(’ before ‘void’
 #define task_stack_page(task) ((void *)(task)->stack)
                                 ^
./include/linux/sched/task_stack.h:19:30: note: in expansion of macro ‘task_stack_page’
 static __always_inline void *task_stack_page(const struct task_struct *task)
                              ^~~~~~~~~~~~~~~
./arch/x86/include/asm/processor.h:813:40: error: expected ‘)’ before ‘(’ token
 #define task_stack_page(task) ((void *)(task)->stack)
                                        ^
./include/linux/sched/task_stack.h:19:30: note: in expansion of macro ‘task_stack_page’
 static __always_inline void *task_stack_page(const struct task_struct *task)
                              ^~~~~~~~~~~~~~~
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/core.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/core.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/core.c:19:
./arch/x86/include/asm/processor.h:813:33: error: expected identifier or ‘(’ before ‘void’
 #define task_stack_page(task) ((void *)task->stack)
                                 ^
./include/linux/sched/task_stack.h:19:30: note: in expansion of macro ‘task_stack_page’
 static __always_inline void *task_stack_page(const struct task_struct *task)
                              ^~~~~~~~~~~~~~~
./include/linux/sched/task_stack.h:19:46: error: expected ‘)’ before ‘const’
 static __always_inline void *task_stack_page(const struct task_struct *task)
                                              ^
./arch/x86/include/asm/processor.h:813:40: note: in definition of macro ‘task_stack_page’
 #define task_stack_page(task) ((void *)task->stack)
                                        ^~~~
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/core.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/core.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/spinlock.h:51,
                 from ./include/linux/seqlock.h:36,
                 from ./include/linux/time.h:6,
                 from ./include/linux/stat.h:19,
                 from ./include/linux/module.h:10,
                 from /home/stella/Documents/sources/dune/kern/core.c:19:
./include/linux/sched/task_stack.h:19:52: error: expected identifier or ‘(’ before ‘struct’
 static __always_inline void *task_stack_page(const struct task_struct *task)
                                                    ^
./arch/x86/include/asm/processor.h:813:31: note: in definition of macro ‘task_stack_page’
 #define task_stack_page(task) task->stack
                               ^~~~
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/core.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/core.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « fpu__initialize » :
(.text+0xa20) : définitions multiples de « fpu__initialize »
/home/stella/Documents/sources/dune/kern/vmx.o:(.text+0xdb0) : défini pour la première fois ici
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « fpu__restore » :
(.text+0xa60) : définitions multiples de « fpu__restore »
/home/stella/Documents/sources/dune/kern/vmx.o:(.text+0xdf0) : défini pour la première fois ici
scripts/Makefile.build:443: recipe for target '/home/stella/Documents/sources/dune/kern/dune.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/dune.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
/home/stella/Documents/sources/dune/kern/preempttrap.c: In function ‘notifier_sched_in’:
/home/stella/Documents/sources/dune/kern/preempttrap.c:16:39: error: implicit declaration of function ‘task_stack_page’; did you mean ‘task_spread_page’? [-Werror=implicit-function-declaration]
  unsigned long __ptr = (unsigned long)task_stack_page(task); \
                                       ^
./arch/x86/include/asm/processor.h:898:26: note: in expansion of macro ‘task_pt_regs’
 #define KSTK_EIP(task)  (task_pt_regs(task)->ip)
                          ^~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/preempttrap.c:23:31: note: in expansion of macro ‘KSTK_EIP’
  if (!trap_state.triggered && KSTK_EIP(current) == trap_conf.trigger_rip) {
                               ^~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/preempttrap.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/preempttrap.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
/home/stella/Documents/sources/dune/kern/preempttrap.c:14:0: warning: "task_pt_regs" redefined
 #define task_pt_regs(task) \
 
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/rcupdate.h:27,
                 from ./include/linux/rculist.h:11,
                 from ./include/linux/pid.h:5,
                 from ./include/linux/sched.h:14,
                 from ./include/linux/uaccess.h:5,
                 from /home/stella/Documents/sources/dune/kern/preempttrap.c:1:
./arch/x86/include/asm/processor.h:813:0: note: this is the location of the previous definition
 #define task_pt_regs(task) \
 
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « fpu__initialize » :
(.text+0xa20) : définitions multiples de « fpu__initialize »
/home/stella/Documents/sources/dune/kern/vmx.o:(.text+0xdb0) : défini pour la première fois ici
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « fpu__restore » :
(.text+0xa60) : définitions multiples de « fpu__restore »
/home/stella/Documents/sources/dune/kern/vmx.o:(.text+0xdf0) : défini pour la première fois ici
scripts/Makefile.build:443: recipe for target '/home/stella/Documents/sources/dune/kern/dune.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/dune.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:186:2: error: implicit declaration of function ‘fpu__restore’; did you mean ‘fpu__restore_sig’? [-Werror=implicit-function-declaration]
  fpu__restore(&current->thread.fpu);
  ^~~~~~~~~~~~
  fpu__restore_sig
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
At top level:
/home/stella/Documents/sources/dune/kern/compat.h:139:13: warning: ‘kernel_fpu_enable’ defined but not used [-Wunused-function]
 static void kernel_fpu_enable(void)
             ^~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:133:13: warning: ‘kernel_fpu_disable’ defined but not used [-Wunused-function]
 static void kernel_fpu_disable(void)
             ^~~~~~~~~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:186:2: error: implicit declaration of function ‘fpu__restore’; did you mean ‘fpu__restore_sig’? [-Werror=implicit-function-declaration]
  fpu__restore(&current->thread.fpu);
  ^~~~~~~~~~~~
  fpu__restore_sig
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
At top level:
/home/stella/Documents/sources/dune/kern/compat.h:139:13: warning: ‘kernel_fpu_enable’ defined but not used [-Wunused-function]
 static void kernel_fpu_enable(void)
             ^~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:133:13: warning: ‘kernel_fpu_disable’ defined but not used [-Wunused-function]
 static void kernel_fpu_disable(void)
             ^~~~~~~~~~~~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
In file included from /home/stella/Documents/sources/dune/kern/vmx.c:64:0:
/home/stella/Documents/sources/dune/kern/compat.h: In function ‘compat_fpu_restore’:
/home/stella/Documents/sources/dune/kern/compat.h:187:2: error: implicit declaration of function ‘fpu__initialize’; did you mean ‘acpi_os_initialize’? [-Werror=implicit-function-declaration]
  fpu__initialize(&current->thread.fpu);
  ^~~~~~~~~~~~~~~
  acpi_os_initialize
/home/stella/Documents/sources/dune/kern/compat.h:193:44: error: invalid type argument of ‘->’ (have ‘struct fpu’)
  copy_kernel_to_fpregs(&current->thread.fpu->state);
                                            ^~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
/home/stella/Documents/sources/dune/kern/preempttrap.c:14:0: warning: "task_pt_regs" redefined
 #define task_pt_regs(task) \
 
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/rcupdate.h:27,
                 from ./include/linux/rculist.h:11,
                 from ./include/linux/pid.h:5,
                 from ./include/linux/sched.h:14,
                 from ./include/linux/uaccess.h:5,
                 from /home/stella/Documents/sources/dune/kern/preempttrap.c:1:
./arch/x86/include/asm/processor.h:813:0: note: this is the location of the previous definition
 #define task_pt_regs(task) \
 
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « fpu__initialize_dune » :
ept.c:(.text+0xa20) : définitions multiples de « fpu__initialize_dune »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdb0) : défini pour la première fois ici
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « fpu__restore » :
ept.c:(.text+0xa60) : définitions multiples de « fpu__restore »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdf0) : défini pour la première fois ici
scripts/Makefile.build:443: recipe for target '/home/stella/Documents/sources/dune/kern/dune.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/dune.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
/home/stella/Documents/sources/dune/kern/preempttrap.c:14:0: warning: "task_pt_regs" redefined
 #define task_pt_regs(task) \
 
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/rcupdate.h:27,
                 from ./include/linux/rculist.h:11,
                 from ./include/linux/pid.h:5,
                 from ./include/linux/sched.h:14,
                 from ./include/linux/uaccess.h:5,
                 from /home/stella/Documents/sources/dune/kern/preempttrap.c:1:
./arch/x86/include/asm/processor.h:813:0: note: this is the location of the previous definition
 #define task_pt_regs(task) \
 
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « fpu__initialize_dune » :
ept.c:(.text+0xa20) : définitions multiples de « fpu__initialize_dune »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdb0) : défini pour la première fois ici
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « fpu__restore_dune » :
ept.c:(.text+0xa60) : définitions multiples de « fpu__restore_dune »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdf0) : défini pour la première fois ici
scripts/Makefile.build:443: recipe for target '/home/stella/Documents/sources/dune/kern/dune.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/dune.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
In file included from ./arch/x86/include/asm/cpufeature.h:5:0,
                 from ./arch/x86/include/asm/thread_info.h:53,
                 from ./include/linux/thread_info.h:39,
                 from ./arch/x86/include/asm/preempt.h:7,
                 from ./include/linux/preempt.h:78,
                 from ./include/linux/rcupdate.h:27,
                 from ./include/linux/rculist.h:11,
                 from ./include/linux/pid.h:5,
                 from ./include/linux/sched.h:14,
                 from ./include/linux/uaccess.h:5,
                 from /home/stella/Documents/sources/dune/kern/preempttrap.c:1:
/home/stella/Documents/sources/dune/kern/preempttrap.c: In function ‘notifier_sched_in’:
./arch/x86/include/asm/processor.h:815:39: error: implicit declaration of function ‘task_stack_page’; did you mean ‘task_spread_page’? [-Werror=implicit-function-declaration]
  unsigned long __ptr = (unsigned long)task_stack_page(task); \
                                       ^
./arch/x86/include/asm/processor.h:898:26: note: in expansion of macro ‘task_pt_regs’
 #define KSTK_EIP(task)  (task_pt_regs(task)->ip)
                          ^~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/preempttrap.c:23:31: note: in expansion of macro ‘KSTK_EIP’
  if (!trap_state.triggered && KSTK_EIP(current) == trap_conf.trigger_rip) {
                               ^~~~~~~~
cc1: some warnings being treated as errors
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/preempttrap.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/preempttrap.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « fpu__initialize_dune » :
ept.c:(.text+0xa20) : définitions multiples de « fpu__initialize_dune »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdb0) : défini pour la première fois ici
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « fpu__restore_dune » :
ept.c:(.text+0xa60) : définitions multiples de « fpu__restore_dune »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdf0) : défini pour la première fois ici
scripts/Makefile.build:443: recipe for target '/home/stella/Documents/sources/dune/kern/dune.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/dune.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « dune_fpu__initialize » :
ept.c:(.text+0xa20) : définitions multiples de « dune_fpu__initialize »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdb0) : défini pour la première fois ici
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « dune_fpu__restore » :
ept.c:(.text+0xa60) : définitions multiples de « dune_fpu__restore »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdf0) : défini pour la première fois ici
scripts/Makefile.build:443: recipe for target '/home/stella/Documents/sources/dune/kern/dune.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/dune.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « dune_fpu__initialize » :
ept.c:(.text+0xa20) : définitions multiples de « dune_fpu__initialize »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdb0) : défini pour la première fois ici
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « dune_fpu__restore » :
ept.c:(.text+0xa60) : définitions multiples de « dune_fpu__restore »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdf0) : défini pour la première fois ici
scripts/Makefile.build:443: recipe for target '/home/stella/Documents/sources/dune/kern/dune.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/dune.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2

stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ objdump -d kern/vmx.o > dump
stella@stella-XPS-13-9380:~/Documents/sources/dune$ gedit dump 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ objdump -d kern/ept.o > ept_dump
stella@stella-XPS-13-9380:~/Documents/sources/dune$ objdump -d kern/vm.o > vmx_dump
objdump: « kern/vm.o »: pas de tel fichier
stella@stella-XPS-13-9380:~/Documents/sources/dune$ objdump -d kern/vmx.o > vmx_dump
stella@stella-XPS-13-9380:~/Documents/sources/dune$ gedit vmx_dump ept_dump 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ vim Makefile 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ vim build-eglibc.sh 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ vim Makefile 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « dune_fpu__initialize » :
ept.c:(.text+0xa20) : définitions multiples de « dune_fpu__initialize »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdb0) : défini pour la première fois ici
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « dune_fpu__restore » :
ept.c:(.text+0xa60) : définitions multiples de « dune_fpu__restore »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdf0) : défini pour la première fois ici
scripts/Makefile.build:443: recipe for target '/home/stella/Documents/sources/dune/kern/dune.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/dune.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2201:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « dune_fpu__restore » :
ept.c:(.text+0xa20) : définitions multiples de « dune_fpu__restore »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdb0) : défini pour la première fois ici
scripts/Makefile.build:443: recipe for target '/home/stella/Documents/sources/dune/kern/dune.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/dune.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ,,,,,,,,,,,,,,,^C
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2203:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:632:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
/home/stella/Documents/sources/dune/kern/ept.o : Dans la fonction « dune_fpu__restore » :
ept.c:(.text+0xa20) : définitions multiples de « dune_fpu__restore »
/home/stella/Documents/sources/dune/kern/vmx.o:vmx.c:(.text+0xdb0) : défini pour la première fois ici
scripts/Makefile.build:443: recipe for target '/home/stella/Documents/sources/dune/kern/dune.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/dune.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2223:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/ept.c:26:0:
/home/stella/Documents/sources/dune/kern/compat.h:138:13: warning: ‘dune_kernel_fpu_enable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_enable(void)
             ^~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:13: warning: ‘dune_kernel_fpu_disable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_disable(void)
             ^~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
  Building modules, stage 2.
  MODPOST 1 modules
ERROR: "__tracepoint_x86_fpu_regs_activated" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
ERROR: "fpu_fpregs_owner_ctx" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
ERROR: "__default_send_IPI_dest_field" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
scripts/Makefile.modpost:92: recipe for target '__modpost' failed
make[3]: *** [__modpost] Error 1
Makefile:1680: recipe for target 'modules' failed
make[2]: *** [modules] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2223:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/ept.c:26:0:
/home/stella/Documents/sources/dune/kern/compat.h:138:13: warning: ‘dune_kernel_fpu_enable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_enable(void)
             ^~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:13: warning: ‘dune_kernel_fpu_disable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_disable(void)
             ^~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
  Building modules, stage 2.
  MODPOST 1 modules
ERROR: "__tracepoint_x86_fpu_regs_activated" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
ERROR: "fpu_fpregs_owner_ctx" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
scripts/Makefile.modpost:92: recipe for target '__modpost' failed
make[3]: *** [__modpost] Error 1
Makefile:1680: recipe for target 'modules' failed
make[2]: *** [modules] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2223:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/ept.c:26:0:
/home/stella/Documents/sources/dune/kern/compat.h:138:13: warning: ‘dune_kernel_fpu_enable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_enable(void)
             ^~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:13: warning: ‘dune_kernel_fpu_disable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_disable(void)
             ^~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
  Building modules, stage 2.
  MODPOST 1 modules
ERROR: "__tracepoint_x86_fpu_regs_activated" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
ERROR: "fpu_fpregs_owner_ctx" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
scripts/Makefile.modpost:92: recipe for target '__modpost' failed
make[3]: *** [__modpost] Error 1
Makefile:1680: recipe for target 'modules' failed
make[2]: *** [modules] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo lsm
lsmem  lsmod  
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo lsm
lsmem  lsmod  
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo lsmod | grep regs
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo lsmod | grep fpu
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo ^C

stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »

stella@stella-XPS-13-9380:~/Documents/sources/dune$ make kern
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
cat: /boot/System.map-5.4.0-139-generic: Permission non accordée
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
<command-line>:0:10: error: invalid suffix "x" on integer constant
/home/stella/Documents/sources/dune/kern/compat.h:59:53: note: in expansion of macro ‘_DO_FORK’
 static do_fork_hack __dune_do_fork = (do_fork_hack) _DO_FORK;
                                                     ^~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init_syscall’:
<command-line>:0:13: error: invalid suffix "x" on integer constant
/home/stella/Documents/sources/dune/kern/vmx.c:1475:36: note: in expansion of macro ‘SYSCALL_TBL’
  memcpy(dune_syscall_tbl, (void *) SYSCALL_TBL,
                                    ^~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2223:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
scripts/Makefile.build:270: recipe for target '/home/stella/Documents/sources/dune/kern/vmx.o' failed
make[3]: *** [/home/stella/Documents/sources/dune/kern/vmx.o] Error 1
Makefile:1767: recipe for target '/home/stella/Documents/sources/dune/kern' failed
make[2]: *** [/home/stella/Documents/sources/dune/kern] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ su
Mot de passe : 
root@stella-XPS-13-9380:/home/stella/Documents/sources/dune# make kern
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2223:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/ept.c:26:0:
/home/stella/Documents/sources/dune/kern/compat.h:138:13: warning: ‘dune_kernel_fpu_enable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_enable(void)
             ^~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:13: warning: ‘dune_kernel_fpu_disable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_disable(void)
             ^~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
  Building modules, stage 2.
  MODPOST 1 modules
ERROR: "__tracepoint_x86_fpu_regs_activated" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
ERROR: "fpu_fpregs_owner_ctx" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
scripts/Makefile.modpost:92: recipe for target '__modpost' failed
make[3]: *** [__modpost] Error 1
Makefile:1680: recipe for target 'modules' failed
make[2]: *** [modules] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
root@stella-XPS-13-9380:/home/stella/Documents/sources/dune# exit
exit
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ll kern/
total 528
drwxrwxr-x 3 stella stella  4096 Mar  8 13:44 ./
drwxrwxr-x 8 stella stella  4096 Mar  8 13:40 ../
-rw-rw-r-- 1 stella stella  4561 Mar  8 13:13 apic.c
-rw-rw-r-- 1 stella stella   265 Mar  4 19:52 apic.h
-rw-rw-r-- 1 stella stella  5328 Mar  8 13:44 apic.o
-rw-rw-r-- 1 stella stella 38743 Mar  8 13:44 .apic.o.cmd
-rw-rw-r-- 1 stella stella  5438 Mar  8 12:46 compat.h
-rw-rw-r-- 1 stella stella  3897 Mar  4 19:52 core.c
-rw-rw-r-- 1 stella stella  6480 Mar  8 13:44 core.o
-rw-rw-r-- 1 stella stella 49012 Mar  8 13:44 .core.o.cmd
-rw-rw-r-- 1 stella stella  2576 Mar  4 19:52 dune.h
-rw-r--r-- 1 root   root     246 Mar  8 13:44 dune.mod
-rw-r--r-- 1 root   root    2971 Mar  8 13:44 dune.mod.c
-rw-r--r-- 1 root   root     372 Mar  8 13:44 .dune.mod.cmd
-rw-r--r-- 1 root   root   63856 Mar  8 13:44 dune.o
-rw-r--r-- 1 root   root     417 Mar  8 13:44 .dune.o.cmd
-rw-rw-r-- 1 stella stella 18150 Mar  8 12:46 ept.c
-rw-r--r-- 1 root   root   16720 Mar  8 13:44 ept.o
-rw-r--r-- 1 root   root   43954 Mar  8 13:44 .ept.o.cmd
-rwxrwxr-x 1 stella stella   542 Mar  4 19:52 extract_symbol.sh*
-rw-rw-r-- 1 stella stella  2756 Mar  4 19:52 Makefile
-rw-r--r-- 1 root   root      49 Mar  8 13:44 modules.order
-rw-r--r-- 1 root   root       0 Mar  8 13:44 Module.symvers
-rw-rw-r-- 1 stella stella  2780 Mar  7 23:41 preempttrap.c
-rw-rw-r-- 1 stella stella    85 Mar  4 19:52 preempttrap.h
-rw-r--r-- 1 root   root    3744 Mar  8 13:44 preempttrap.o
-rw-r--r-- 1 root   root   30731 Mar  8 13:44 .preempttrap.o.cmd
drwxrwxr-x 3 stella stella  4096 Mar  8 13:44 tmp/
-rw-rw-r-- 1 stella stella 59752 Mar  8 12:46 vmx.c
-rw-rw-r-- 1 stella stella  2896 Mar  7 12:52 vmx.h
-rw-r--r-- 1 root   root   41200 Mar  8 13:44 vmx.o
-rw-r--r-- 1 root   root   53666 Mar  8 13:44 .vmx.o.cmd
stella@stella-XPS-13-9380:~/Documents/sources/dune$ cat kern/Makefile 
# a Makefile for the Dune Kernel Module
# Adapted from the ipw2200 project.

ifndef CONFIG_DUNE
EXTERNAL_BUILD=y
CONFIG_DUNE=m
endif

list-m :=
list-$(CONFIG_DUNE) += dune
obj-$(CONFIG_DUNE) += dune.o
dune-objs := \
	apic.o \
	core.o \
	vmx.o \
	ept.o \
	preempttrap.o

# KSRC should be set to the path to your sources
# modules are installed into KMISC
KVER  := $(shell uname -r)
EXTRACT := $(M)/extract_symbol.sh
KSRC := /lib/modules/$(KVER)/build
KMISC := /lib/modules/$(KVER)/kernel/drivers/misc
KMISC_INC := /lib/modules/$(KVER)/include

SYSCALL_TBL = 0x$(shell $(EXTRACT) sys_call_table)
DO_FORK = 0x$(shell $(EXTRACT) do_fork)
_DO_FORK = 0x$(shell $(EXTRACT) _do_fork)

CFLAGS_vmx.o = -DSYSCALL_TBL=$(SYSCALL_TBL) -DDO_FORK=$(DO_FORK) -D_DO_FORK=$(_DO_FORK)

# KSRC_OUTPUT should be overridden if you are using a 2.6 kernel that
# has it's output sent elsewhere via KBUILD_OUTPUT= or O=
KSRC_OUTPUT := $(KSRC)

PWD=$(shell pwd)

VERFILE := $(KSRC_OUTPUT)/include/linux/version.h
KERNELRELEASE := $(shell \
	if [ -r $(VERFILE) ]; then \
		(cat $(VERFILE); echo UTS_RELEASE) | \
		$(CC) -I$(KSRC_OUTPUT) $(CFLAGS) -E - | \
		tail -n 1 | \
		xargs echo; \
        else \
		uname -r; \
	fi)

MODPATH := $(DESTDIR)/lib/modules/$(KERNELRELEASE)

all: modules

clean:
	rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
	rm -rf $(PWD)/tmp
#	for file in *.{c,h}; do \
#		sed -i -e "s:\ *$$::g" -e "s:\t*$$::g" $$file; \
	done

distclean: clean
	rm -f tags TAGS

TMP=$(PWD)/tmp
MODVERDIR=$(TMP)/.tmp_versions

modules:
	mkdir -p $(MODVERDIR)
#	-cp $(IEEE80211_MODVERDIR)/*.mod $(MODVERDIR)
ifdef ($(KSRC_OUTPUT)/.tmp_versions)
	-cp $(KSRC_OUTPUT)/.tmp_versions/*.mod $(MODVERDIR)
endif
ifeq ($(KSRC),$(KSRC_OUTPUT)) # We're not outputting elsewhere
ifdef ($(KSRC)/.tmp_versions)
	-cp $(KSRC)/.tmp_versions/*.mod $(MODVERDIR)
endif
	$(MAKE) -C $(KSRC) M=$(PWD) MODVERDIR=$(MODVERDIR) modules
else # We've got a kernel with seperate output, copy the config, and use O=
	mkdir -p $(TMP)
	cp $(KSRC_OUTPUT)/.config $(TMP)
	$(MAKE) -C $(KSRC) M=$(PWD) MODVERDIR=$(MODVERDIR)) O=$(PWD)/tmp modules
endif

install: modules
	install -d $(KMISC)
	install -m 644 -c $(addsuffix .ko,$(list-m)) $(KMISC)
	/sbin/depmod -a ${KVER}

uninstall:
	rm -rf $(addprefix $(KMISC),$(addsuffix .ko,$(list-m)))
	/sbin/depmod -a ${KVER}


.PHONY: TAGS tags check_inc

RCS_FIND_IGNORE := \( -name SCCS -o -name BitKeeper -o -name .svn -o -name CVS \) -prune -o
define all-sources
	( find . $(RCS_FIND_IGNORE) -name '*.[chS]' -print )
endef

TAGS:
	$(all-sources) | etags -
tags:
	rm -f $@
	CTAGSF=`ctags --version | grep -i exuberant >/dev/null && echo "-I __initdata,__exitdata,EXPORT_SYMBOL,EXPORT_SYMBOL_NOVERS"`; \
	$(all-sources) | xargs ctags $$CTAGSF -a

stella@stella-XPS-13-9380:~/Documents/sources/dune$ 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ rm errors 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2223:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/ept.c:26:0:
/home/stella/Documents/sources/dune/kern/compat.h:138:13: warning: ‘dune_kernel_fpu_enable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_enable(void)
             ^~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:13: warning: ‘dune_kernel_fpu_disable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_disable(void)
             ^~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
  Building modules, stage 2.
  MODPOST 1 modules
ERROR: "__tracepoint_x86_fpu_regs_activated" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
ERROR: "fpu_fpregs_owner_ctx" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
scripts/Makefile.modpost:92: recipe for target '__modpost' failed
make[3]: *** [__modpost] Error 1
Makefile:1680: recipe for target 'modules' failed
make[2]: *** [modules] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ objdump -d kern/dune.o > dune_dump
stella@stella-XPS-13-9380:~/Documents/sources/dune$ gedit dune_
dune_dump    dune_env.sh  dune_req.sh  
stella@stella-XPS-13-9380:~/Documents/sources/dune$ gedit dune_dump 
stella@stella-XPS-13-9380:~/Documents/sources/dune$ ^C
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
[sudo] Mot de passe de stella : 
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2225:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/ept.c:26:0:
/home/stella/Documents/sources/dune/kern/compat.h:138:13: warning: ‘dune_kernel_fpu_enable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_enable(void)
             ^~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:132:13: warning: ‘dune_kernel_fpu_disable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_disable(void)
             ^~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
  Building modules, stage 2.
  MODPOST 1 modules
ERROR: "__tracepoint_x86_fpu_regs_activated" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
ERROR: "fpu_fpregs_owner_ctx" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
scripts/Makefile.modpost:92: recipe for target '__modpost' failed
make[3]: *** [__modpost] Error 1
Makefile:1680: recipe for target 'modules' failed
make[2]: *** [modules] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2223:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/ept.c:26:0:
/home/stella/Documents/sources/dune/kern/compat.h:142:13: warning: ‘dune_kernel_fpu_enable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_enable(void)
             ^~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:136:13: warning: ‘dune_kernel_fpu_disable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_disable(void)
             ^~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
  Building modules, stage 2.
  MODPOST 1 modules
ERROR: "dune_fpu_fpregs_owner_ctx" [/home/stella/Documents/sources/dune/kern/dune.ko] undefined!
scripts/Makefile.modpost:92: recipe for target '__modpost' failed
make[3]: *** [__modpost] Error 1
Makefile:1680: recipe for target 'modules' failed
make[2]: *** [modules] Error 2
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
Makefile:68: recipe for target 'modules' failed
make[1]: *** [modules] Error 2
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
Makefile:8: recipe for target 'kern' failed
make: *** [kern] Error 2
stella@stella-XPS-13-9380:~/Documents/sources/dune$ sudo make clean && sudo make
for dir in kern libdune; do \
	make -C $dir clean; \
done
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
rm -f *.mod.c *.mod *.o *.ko .*.cmd .*.flags .lst *.lst *.order *.symvers
rm -rf /home/stella/Documents/sources/dune/kern/tmp
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
rm -f *.o test *.d libdune.a
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
make -C kern
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/kern »
mkdir -p /home/stella/Documents/sources/dune/kern/tmp/.tmp_versions
make -C /lib/modules/5.4.0-139-generic/build M=/home/stella/Documents/sources/dune/kern MODVERDIR=/home/stella/Documents/sources/dune/kern/tmp/.tmp_versions modules
make[2] : on entre dans le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
  CC [M]  /home/stella/Documents/sources/dune/kern/apic.o
  CC [M]  /home/stella/Documents/sources/dune/kern/core.o
  CC [M]  /home/stella/Documents/sources/dune/kern/vmx.o
/home/stella/Documents/sources/dune/kern/vmx.c: In function ‘vmx_init’:
/home/stella/Documents/sources/dune/kern/vmx.c:2223:1: warning: label ‘failed1’ defined but not used [-Wunused-label]
 failed1:
 ^~~~~~~
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x188c: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x19fe: indirect call found in RETPOLINE build
/home/stella/Documents/sources/dune/kern/vmx.o: warning: objtool: vmx_launch()+0x1bb6: call without frame pointer save/setup
  CC [M]  /home/stella/Documents/sources/dune/kern/ept.o
/home/stella/Documents/sources/dune/kern/ept.c:631:13: warning: ‘ept_mmu_notifier_invalidate_page’ defined but not used [-Wunused-function]
 static void ept_mmu_notifier_invalidate_page(struct mmu_notifier *mn,
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
In file included from /home/stella/Documents/sources/dune/kern/ept.c:26:0:
/home/stella/Documents/sources/dune/kern/compat.h:142:13: warning: ‘dune_kernel_fpu_enable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_enable(void)
             ^~~~~~~~~~~~~~~~~~~~~~
/home/stella/Documents/sources/dune/kern/compat.h:136:13: warning: ‘dune_kernel_fpu_disable’ defined but not used [-Wunused-function]
 static void dune_kernel_fpu_disable(void)
             ^~~~~~~~~~~~~~~~~~~~~~~
  CC [M]  /home/stella/Documents/sources/dune/kern/preempttrap.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC [M]  /home/stella/Documents/sources/dune/kern/dune.mod.o
  LD [M]  /home/stella/Documents/sources/dune/kern/dune.ko
make[2] : on quitte le répertoire « /usr/src/linux-headers-5.4.0-139-generic »
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/kern »
make -C libdune
make[1] : on entre dans le répertoire « /home/stella/Documents/sources/dune/libdune »
gcc -Wall -g -O3 -MD  -o entry.o -c entry.c
gcc    -c -o dune.o dune.S
gcc    -c -o vsyscall.o vsyscall.S
gcc -Wall -g -O3 -MD  -o elf.o -c elf.c
gcc -Wall -g -O3 -MD  -o vm.o -c vm.c
gcc -Wall -g -O3 -MD  -o util.o -c util.c
gcc -Wall -g -O3 -MD  -o page.o -c page.c
gcc -Wall -g -O3 -MD  -o procmap.o -c procmap.c
gcc -Wall -g -O3 -MD  -o debug.o -c debug.c
gcc -Wall -g -O3 -MD  -o apic.o -c apic.c
gcc -Wall -g -O3 -MD -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -msoft-float -o trap.o -c trap.c
ar crD libdune.a entry.o dune.o vsyscall.o elf.o vm.o util.o page.o procmap.o debug.o apic.o trap.o
make[1] : on quitte le répertoire « /home/stella/Documents/sources/dune/libdune »
stella@stella-XPS-13-9380:~/Documents/sources/dune$ 

